# csvtosrt

## このプログラムは何？

CSVテキストファイルとSBV字幕ファイルを相互変換するプログラムです。
パソコンのFirefox及びGoogle Chromeで使用可能です。（IEやEdge、PC以外のデバイスでの動作は、正常に動作するか確認していません。）
サーバーサイドで動作が必要なものはありません。クライアント側で完結します。

----
## 使い方

「Import」の直下にある「参照…」をクリックし、変換元となる字幕ファイルを選んでください。
対応している字幕ファイルは「所定の形式のCSV（後述）」またはSBV形式字幕ファイルです。色や文字装飾については確認していません。
また、ファイル形式と終了時間の有無は手動で選択する必要があります。

### 入力可能なファイル形式
#### CSV, 終了時間あり

|A|B|C|
|---:|---:|:---|
|(開始時間)|(終了時間)|(字幕の内容)|

開始時間・終了時間の書き方は、以下の３種に対応しています。

- (時):(分):(秒).(ミリ秒)
  - 例) `0:2:30.1` → 2分30秒と1/10秒。
- (時):(分):(秒)
  - 例）`0:02:30` → 2分30秒。ミリ秒は0として扱われる。
- (分):(秒）
  - 例）`2:30` → 2分30秒。ミリ秒は0として扱われる。
 
#### CSV, 終了時間なし

|A|B|
|---:|---:|
|(開始時間)|(字幕の内容)|

開始時間の書き方は「開始時間・終了時間」と同じ形式に対応しています。
終了時間は開始時間の0.9秒後になります。直後の字幕と時間が重複しているかの確認は行いません。

#### sbv

SubViewer 字幕形式ファイルです。このファイル形式の場合、終了時間の有無の選択欄は無視されます。

----
### 出力

csv または sbv 形式のファイル出力ができます。文字コードはUTF-8固定ですが、BOMの有無、改行コードの選択が可能です。
それらを選んだあと、「出力ファイル生成」をクリックすると「出力データ」からダウンロードすることが可能になります。
SubRip形式を出力可能にすることも構想していましたが、現在は止まっています。また、色や文字装飾について正常に動作するかの確認は行っていません。

## 既知の問題・注意点

- BOM付きの入力ファイルに非対応です。（BOM対応の処理をしていないため意図しない動作をする恐れがあります。）
- CSV読み込み機構は RFC4180 に必ずしも沿っていません。また、字幕変換に特化させた部分があります。
- テキストによるデータ構造です。拡張に向いていません。
